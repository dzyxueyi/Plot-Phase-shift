
L=0:1:238;
D1=@(L) (L < 50).*(16.86*L) + (L >= 50 & L < 59.5).*(-86.8*(L-50)+843)...
    +(L >= 59.5 & L < 109.5).*(16.86*(L-59.5)+18.4) + (L >= 109.5 & L < 119).*(-85.9*(L-109.5)+861.4)...
    +(L >= 119 & L < 169).*(16.86*(L-119)+36.8)+ (L >= 169 & L < 178.5).*(-85.9*(L-169)+879.8)...
    +(L >= 178.5 & L < 228.5).*(16.86*(L-178.5)+55.2)+ (L >= 228.5 & L <= 238).*(-85.9*(L-228.5)+898.2);%1560nm
D2=@(L) (L < 50).*(16.32*L) + (L >= 50 & L < 59.5).*(-85.9*(L-50)+816)...
    +(L >= 59.5 & L < 109.5).*(16.32*(L-59.5)) + (L >= 109.5 & L < 119).*(-85.9*(L-109.5)+816)...
    +(L >= 119 & L < 169).*(16.32*(L-119))+ (L >= 169 & L < 178.5).*(-85.9*(L-169)+816)...
    +(L >= 178.5 & L < 228.5).*(16.32*(L-178.5))+ (L >= 228.5 & L <= 238).*(-85.9*(L-228.5)+816); %1550nm
D3=@(L) (L < 50).*(15.77*L) + (L >= 50 & L < 59.5).*(-85*(L-50)+788.5)...
    +(L >= 59.5 & L < 109.5).*(15.77*(L-59.5)-19) + (L >= 109.5 & L < 119).*(-85.9*(L-109.5)+769.5)...
    +(L >= 119 & L < 169).*(15.77*(L-119)-38)+ (L >= 169 & L < 178.5).*(-85.9*(L-169)+750.5)...
    +(L >= 178.5 & L < 228.5).*(15.77*(L-178.5)-57)+ (L >= 228.5 & L <= 238).*(-85.9*(L-228.5)+731.5); %1540nm
plot(L,D1(L),'r',L,D2(L),'b',L,D3(L),'g')

% grid on
xlabel('Distance /m');
ylabel('Accumulate dispersion (ps/mm)');
title('Disersion map');
legend('1560nm','1550nm','1540nm')

% print to pdf
set(gcf,'Units','Inches');
pos = get(gcf,'Position');
set(gcf,'PaperPositionMode','Auto','PaperUnits','Inches','PaperSize',[pos(3), pos(4)])
filename = 'dispersion map'; % set pdf file name
print(gcf,filename,'-dpdf','-r0')
close(gcf) 